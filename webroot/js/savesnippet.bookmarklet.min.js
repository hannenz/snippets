(function(){var c="1.3.2";if(window.jQuery===undefined||window.jQuery.fn.jquery<c){var a=false;var b=document.createElement("script");b.src="http://ajax.googleapis.com/ajax/libs/jquery/"+c+"/jquery.min.js";b.onload=b.onreadystatechange=function(){if(!a&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){a=true;d()}};document.getElementsByTagName("head")[0].appendChild(b)}else{d()}function d(){(window.snippetsBookmarklet=function(){var k=jQuery.noConflict();if(k("#snippets-bookmarklet-image-select").length>0){alert("Es l√§uft bereits eine Instanz des Bookmarklets auf dieser Seite. Vielleicht solltest du die Seite neu laden (F5)");return}k("head").append('<link rel="stylesheet" type="text/css" href="http://'+domain+'/css/bookmarklet.css">');var i=k("body");var q=k('<div id="snippets-bookmarklet-image-select" />');var l=k("<h4>W&auml;hle ein Bild f&uuml;r diesen Schnipsel</h4>");var g=k('<p><a href="#">Oder hier klicken um ohne Bild fortzufahren</a></p>');var r=k("<p>Oder dr&uuml;cke &ldquo;Escape&rdquo; um abzubrechen</p>");q.append(l).append(g).append(r);var o=getallBgimages();var h=i.find("img");h.each(function(s,t){var n=k(t);o.push(n[0].src)});var f=o.length;var m=0;k(o).each(function(n,s){var t=new Image();t.src=s;t.onload=function(){if(t.height>50&&t.width>50){var u=k(t);u.addClass("snippets-bookmarklet-image").appendTo(q).bind("click",e);m++}if(--f==0){p()}};t.onerror=t.onabort=function(){if(--f==0){p()}}});setTimeout(p,5000);function p(){if(m==0){j();return}g.bind("click",j);q.prependTo(i);k(document).bind("keyup",function(n){if(n.keyCode==27){q.remove();k("#snippets-iframe").remove()}})}function e(t){q.remove();var s=k(this).attr("src");if(!s.match(/^http/)){s=window.location.href+s}var n="http://"+domain+"/snippets/add?url="+encodeURIComponent(window.location.href)+"&image="+encodeURIComponent(s)+"&title="+encodeURI(document.title);window.open(n,"Blackboard - neuer Schnipsel","width=480,height=880,scrollbars=yes,resizable=yes,toolbar=no,titlebar=no,location=no")}function j(s){q.remove();var n="http://"+domain+"/snippets/add?url="+encodeURIComponent(window.location.href)+"&title="+encodeURI(document.title);window.open(n,"Blackboard - neuer Schnipsel","width=480,height=880,scrollbars=yes,resizable=yes,toolbar=no,titlebar=no,location=no")}})()}})();function getallBgimages(){var b,c=[],a=document.getElementsByTagName("*");a=c.slice.call(a,0,a.length);while(a.length){b=deepCss(a.shift(),"background-image");if(b){b=/url\(['"]?([^")]+)/.exec(b)||[]}b=b[1];if(b&&c.indexOf(b)==-1){c[c.length]=b}}return c}function deepCss(d,c){if(!d||!d.style){return""}var a=c.replace(/\-([a-z])/g,function(f,e){return e.toUpperCase()});if(d.currentStyle){return d.style[a]||d.currentStyle[a]||""}var b=document.defaultView||window;return d.style[a]||b.getComputedStyle(d,"").getPropertyValue(c)||""}Array.prototype.indexOf=Array.prototype.indexOf||function(c,b){b=b||0;var a=this.length;while(b<a){if(this[b]===c){return b}++b}return -1};